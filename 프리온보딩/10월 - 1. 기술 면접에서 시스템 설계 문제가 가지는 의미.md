# 기술 면접에서 시스템 설계 문제가 가지는 의미(프리온보딩 백엔드 챌린지 10월)

출처남기면 강의자료 복붙 ok	

## 기술면접에서 시스템 설계 문제가 가지는 의미

## 1-2) [Session] 기술 면접에서 시스템 설계 문제가 가지는 의미

### 1. 시스템 설계 문제란

### 1-1) 무엇을 원하는 가 ?

- 기술 면접에서 구직자에게 어떻게 주어진 문제를 해결할 것인지 문제 해결 능력을 파악하는 과정이다.
- 문제의 정답은 없고 단지 설계 기술을 면접관들에게 보여주는 자리이다.
- 이 이상으로 지원자가 협력에 적합한 사람인지, 압박이 심한 상황에도 잘 헤쳐 나갈 자질이 있는지 등을 파악할 수 있는 항목이다.

### 1-2) 피해야할 것 ??

- 설계의 순수성에 집착한 나머지 타협적 결정을 도외시하고 오버 엔지니어링을 하는 엔지니어링들이 협업에도 많다.
- 오버 엔지니어링의 결과로 시스템 전반의 비용이 올라간다. 해당 비용에는 인프라 비용과 개발자 인력에 비용 모두 포함이 된다.

### 2. 효과적 면접을 위한 4단계 접근법

### 1단계: 문제 이해 및 설계 범위 확정

- 바로 답부터 들이밀지 말자.
- 깊이 생각하고 질문하여 요구사항과 가정들을 분명히 하자.
- 가장 중요한 기술 중 하나는 올바른 질문을 하는 것. 적절한 가정을 하는 것. 그리고 시스템 구축에 필요한 정보를 모으는 것.
- 이 단계에서는 요구사항을 이해하고 모호함을 없애는 게 이 단계에서 가장 중요하다.

Ex) 뉴스피드 시스템 설계

- 질문
    - 가장 중요한 기능이 무엇인가?
    - 뉴스피드의 정렬상태는 어떻게 되야하는가?
    - 최대 사용자? 친구상태?
    - 트래픽 규모?
    - 피드에 이미지 또는 영상의 유무?

### 2단계: 개략적인 설계안 제시 및 동의 구하기

- 개략적인 설계안을 제시하고, 면접관의 동의를 얻는 것
- 최초 설계안이 시스템 규모에 관계된 제약사항들을 만족하는지 개략적으로 계산해보자.
- 추가로 시스템의 구체적 사용 사례도 몇 가지 살펴보자, Edge case 를 발견하는 데도 도움이 될 수 있다.

### 3단계: 상세 설계

- 대부분의 경우, 면접관은 여러분의 특정 시스템 컴포넌트들의 세부사항을 깊이 있게 설명하는 것을 보길 원한다.
- 예를들어
- 단축 URL 생성기 설계 -> 해시 함수 설계를 어떻게 하였는가?
- 채팅 시스템 -> 어떻게 지연시간을 줄였는가? 사용자의 온/오프라인 상태를 어떻게 확인하는가?

### 4단계: 마무리

- 시스템에 개선할 점은 언제나 있기 마련이다. 면접관이 개선 가능한 점을 찾아내라 주문한다면, 자신의 설계를 비판적 사고로 바라보자.
- 여러분이 만든 설계를 한번 다시 요약해주는 것도 좋다.
- 오류(서버오류/네트워크 장애 등)가 발생하면 무슨 일이 생기는지 생각해보자.
- 미래에 닥칠 규모 확장 요구에 어떻게 대처할 것인지 생각해보자.

### 해야할 것

- 질문을 통해 확인하라, 스스로 내린 가정이 옳다 믿고 진행하지 말아라
- 문제의 요구사항을 최대한 이해하라 (사용자 수)
- 면접관이 여러분의 사고 흐름을 이해할 수 있도록 하라. 즉 소통이 중요하다.
- 소통을 통해 면접관과 함께 좋은 아이디어를 도출하라.

### 하지 말아야 하는 것

- 전형적인 면접 문제들에도 대비하지 않고 면접장에 가지말자.
- 요구사항/가정이 분명하지 않은 상태에서 설계를 하지말자.
- 힌트를 청하길 주저하지 말자. 면접관과 소통해나가며 풀어나가자. 침묵 속 설계를 진행하지 말자.
- 의견을 일찍, 그리고 자주 구하자. 면접이 끝나기 전까지.

### 3. 어떻게 준비할 것인가 ?

- 취준 혹은 작은 규모의 회사에 다니는 주니어는 직접 경험하기 어렵다.
- 따라서 아래와 같은 책들을 통해 간접 경험이 필요하다.


# ****1-3) [Session] 기본 개념 정리****

## **첫 주차 기본 개념 설명**

### **1. 가장 기초적인 단일 서버를 설계 해보자**

모든 컴포넌트가 단 한 대의 서버에서 실행되는 간단한 시스템

![enter image description here](https://user-images.githubusercontent.com/60383031/189622053-fc4ba467-6951-4059-8f73-184eff5e8cec.png)

### **2. 어떤 데이터베이스를 사용하지: RDBMS vs NoSQL**

### **CAP 이론 [[이미지 출처](https://killsia.tistory.com/entry/RDBMS-vs-NoSQL-CAP-%EC%9D%B4%EB%A1%A0)]**
![enter image description here](https://user-images.githubusercontent.com/60383031/189612437-3a88f888-627d-449f-9ec9-10e90aec5032.png)

### **RDBMS: 관계형 데이터 베이스**

- MySQL, Oracle DB, PostgreSQL 등이 있다.
- 관계형 데이터베이스는 자료를 테이블과 열, 컬럼으로 표현한다.
- Join 을 하여 여러 관계를 합칠 수 있다.

### **NoSQL: 비 관계형 데이터 베이스**

- MongoDB, DynamoDB, Cassandra 등이 있다.
- 키-값 저장소, 그래프 저장소, 칼럼 저장소, 문서 저장소 등으로 구분할 수 있다.
- Join 연산은 지원하지 않는다.

+ 개념
https://www.vinsguru.com/cqrs-pattern/

### **3. 규모를 확장해보자: 수평적 확장 vs 수직적 확장**

### 수평적 확장(Scale out) vs 수직적 확장(scale up)
 [[이미지 출처](https://butter-shower.tistory.com/109)]
![https://user-images.githubusercontent.com/60383031/189621394-d4907956-b968-4d95-89ad-651cb551109c.png](https://user-images.githubusercontent.com/60383031/189621394-d4907956-b968-4d95-89ad-651cb551109c.png)

- 수평적 확장: 더 많은 서버를 !!
- 수직적 확장: 더 고사양으로 !!

### **수직적 확장의 단점**

- 한 대의 서버에 CPU, Memory 를 무한대로 증설할 방법은 없다.
- 비용이 선형적인 추세보다 훨씬 빠르게 증가한다.
- (고사양의 )두배 이상의 CPU, Memory 를 갖춘 시스템은 두배 이상의 비용이 들지만, 두배 이상의 부하를 처리할 수 있는 것은 아니다.






## 사전 과제
(1) 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.
(2) TCP 와 UDP 의 차이를 작성해주세요.
(3) 웹 브라우저에 네이버 를 검색하고 화면에 네이버 화면이 출력이 될 때 까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.
(4) 본인이 주력으로 사용하는 언어에서 설계적 결함 한 가지를 작성해주세요.
(5) 본인이 주력으로 사용하는 언어에서 자료구조와 관련 된 클래스가 내부적으로 어떻게 동작하는지 한 가지 사례를 정하여 작성해주세요. ex) ArrayList, HashMap 등등

### 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.
낙관적 lock 비관적lock 에대한 내용
분산lock - 레디스 사용하여 정합성 검증

### 본인이 주력으로 사용하는 언어에서 설계적 결함 한 가지를 작성해주세요.
java는 버전이 올라가면서 기능적인 결함을 고치려고 노력중이다. 릴리즈노트를 따라가거나 이펙티브자바 모던자바인액션 읽어보면 이렇게 하지마 하는 내용
jdk17에서 finalize deprecated됐는데 왜?
thread.stop 왜 안쓰는지
stack이 vector를 상속하는데 synchronized 너무 감춰져있다보니까 있는지도 모르고 쓰는.. 주석보면 Deque를 쓰라고하는데 굳이? -> 자바에서도 인증한 오류(이펙티브자바에 있는 내용)
RestTemplate같은경우에 원래 deprecated되어있었는데 스프링버전올라가면서 다시 풀려서 사용중


### 본인이 주력으로 사용하는 언어에서 자료구조와 관련 된 클래스가 내부적으로 어떻게 동작하는지 한 가지 사례를 정하여 작성해주세요. ex) ArrayList, HashMap 등등
어떤 자료형쓸지 한번 더 고민하게 되니까
삽입이 많이 일어난다->? 순서가 중요하다 ->?
한번만들어두고 잘 안쓴다 ->?
this-is-spear 5번문제 설명 잘했음
https://github.com/this-is-spear/wanted-pre-onboarding-challenge-be-task-October/blob/main/5%EB%B2%88%20%EB%AC%B8%EC%A0%9C.md
ArrayList의 목적은 내부적으로 크기를 체크한다.
initialCapacity를 잡고 넘어가면 새로 추가
insert가 굉장히 많이 일어나는경우는 효율적일까..
capacity 계속 체크하면서 리스트를 만들것인데..


### 포트폴리오 및 면접
신입때 만들면 좋을 프로젝트 : 뉴스 -> 최신뉴스기준으로 평점기준 설정할수도 있고
보통 이력서 기반 질문 + cs 질문(db에 관한 질문 비중이 더 높았음)
ex) 인덱스가 어떻게 만들어지는지
클러스터랑 논클러스터가 무엇인지
sql 실행길 어떻게 만드는지 최적화 어떻게 하는지
인증만들었을 경우 인증에 대해 꼬리질문
변태적인경우에는 gc종류별로 차이/자바버전별로 default gc 뭐쓰는지/ 해시맵에서 키값이 여러개있을때 어떻게 내부적으로 연결해서 사용하나? (-> 대부분 링크드리스트인데 자바버전 올라가면서 내용이 달라졌다고함)

만약 코틀린 이력서에 있으면 코틀린이랑 자바 차이점 companion어쩌구랑 static이랑 차이점
일급객체를 함수로 쓸수있는 코틀린~~

이력서에 차있는게 없으면 cs질문 많이받을것임

cs, 이력서 프로젝트, 기술 스택 - 기본개념
gc/jvm/stringbuilder,buffer,string/
시스템설계 관련 1문제 정도는 물어봄 - 
선착순 이벤트의 설계를 어떻게 할것인지
/캐싱을 어떤 전략을 할것인지?/
msa아키텍처 서로다른서비스간에 어떻게 커뮤니케이션을 할것인가
ktx예매 선착순 어떻게 처리하는지 아키텍쳐를 잡고 어떤 기술스택을 사용할지 질문받은경험
->tps어느정도되냐에 따라 설계가 달라지고..
캐싱 db이중화클러스터링 샤딩 메시지큐에 대한 질문

### 유튜브/포스팅 추천
xUnit
도메인주도설계란 무엇인가
[조영호님 우아한객체지향](https://www.youtube.com/watch?v=dJ5C4qRqAgA&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech)
 [그런 REST API로 괜찮은가](https://www.youtube.com/watch?v=RP_f5dMoHFc&ab_channel=naverd2)
[b마트 CQRS](https://www.youtube.com/watch?v=fg5xbs59Lro&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech)
 [ddd-lite@Spring](https://www.youtube.com/watch?v=TdyOH1xZpT8&ab_channel=NHNCloud)

### 도서추천
http 완벽가이드
이것이자바다->이펙티브자바
만들면서배우는 헥사고날(헥사고날이 좋은지 잘 모르겠지만)
만들면서 배우는 클린아키텍처 강추
도메인 주도 설계로 시작하는 마이크로서비스 개발
- sql 쿼리튜닝관련
: real mysql /sql 첫걸음
: sql 레벨업
: 친절한 sql 튜닝

- 데이터중심애플리케이션설계
처음읽기 어려움
확장성 nosql의 탄생 어렵다
트랜잭션은 도움많이됐음
리더/팔로워/파티셔닝

- 가상면접사례로본 대규모애플리케이션설계
1장 강추
3,9,10 좋은내용
sns한다면 11장
크롤링제한 4장


### 자료 출처
원티드 10월 백엔드 프리온보딩 챌린지메이커 - 10월3년차 백엔드 개발자 훈
