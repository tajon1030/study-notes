## 3. IoC 컨테이너 1부: 스프링 IoC 컨테이너와 빈
Inversion of Control: 의존 관계 주입(Dependency Injection)이라고도 하며,  
어떤 객체가 사용하는 의존 객체를 직접 만들어 사용하는게 아니라, 생성자를 사용하여 **주입 받아** 사용하는 방법을 말함.

### 스프링 IoC 컨테이너
직접적으로 생성자를 사용하여 의존객체를 주입할수도있지만 IoC컨테이너를 주로 이용함  
- BeanFactory(IoC컨테이너의 가장 핵심적인 클래스)  
- 애플리케이션 컴포넌트의 중앙 저장소.  
- 빈 설정 소스로 부터 빈 정의를 읽어들이고, 빈을 구성하고 제공한다.  

### 빈
- 스프링 IoC 컨테이너가 관리 하는 객체.  
- 장점  
	- 의존성 관리 : 의존성주입을 하려면 빈으로 등록해야함  
	- 스코프 : 기본적으로 싱글톤으로 객체를 만들어 관리하여 항상 같은 객체를 주입받을수있어서 효율적이고 런타임시 성능최적화에도 유리하다.  
	- 라이프사이클 인터페이스 지원(ex-빈이 만들어졌을때 하고싶은 행위를 @PostConstruct를 이용해서 작성할수도 있음)  

### ApplicationContext
- BeanFactory를 상속받아 우리가 실질적으로 사용하는 IoC컨테이너
- 메시지 소스 처리 기능 (i18n) - 메세지다국화 기능을 가지고있음
- 이벤트 발행 기능
- 리소스 로딩 기능



## 4. IoC 컨테이너 2부: ApplicationContext와 다양한 빈 설정 방법

### 스프링 IoC 컨테이너의 역할
- 빈 인스턴스 생성  
- 의존 관계 설정  
- 빈 제공  

스프링 IoC컨테이너는 빈설정파일이 있어야함  

### 빈 설정
- 빈 명세서
- 빈에 대한 정의를 담고 있다.
	- 이름
	- 클래스
	- 스코프
	- 생성자 아규먼트 (constructor)
	- 프로퍼트 (setter)


#### xml설정방식(고전방식)  
~~~xml
<bean id="studentRepository" class="pakageName.StudentRepository">
<bean id="registerService" class="pakageName.StudentRegisterService">
  <const ructor-arg ref="studentRepository"/>
</bean>
~~~  

일일히 등록하는게 귀찮아서 나온방식이 component-scan  
특정 패키지 이하의 모든 클래스 중에 @Component 애노테이션을 사용한 클래스를 빈으로 자동으로 등록 해 줌. (이를 확장받은 애노테이션들 - @Service,@Repository 등..)   
~~~xml
<context:component-scan base-package="packageName"/>
~~~  

#### 자바설정파일
ApplicationConfig라고 @Configuration 빈설정파일을 만들어서 해당 설정파일에 @Bean을 통해서 빈을 등록할수있음  
~~~java
 @Configuration
 public class ApplicationConfig{
 
     @Bean
     public BookRepository bookRepository(){
 	    return new BookRepository();
     }
     @Bean
     public BookService bookService(){
 	    BookService bookService = new BookService();
 	    bookService.setBookRepository(bookRepository());
 	    return bookService;
     }
}
~~~

컴포넌트스캔을 자바설정으로 하는방법
@Component를 사용한 클래스들을 @ComponentScan을 통해서 읽어들인다.  
~~~java
@Configuration
@ComponentScan(basePackages={"pakageName"})
public class ApplicationConfig {
}
~~~

### AppcliationContext
main함수에서 다음과 같이 선언  
- ClassPathXmlApplicationContext (XML)   
~~~java
ApplicationContext context = 
    new ClassPathXmlApplicationContext(configLocation="applicationContext.xml");
~~~

- AnnotationConfigApplicationContext (Java)  
~~~java
  ApplicationContext context =
      new AnnotationConfigApplicationContext(ApplicationConfig.class);
~~~

스프링부트에 가서는 위 설정들을 @SpringBootApplication에서 다 해줌  
@SpringBootApplication가 달린 클래스 자체가 빈설정파일이라고 볼수있다.  




