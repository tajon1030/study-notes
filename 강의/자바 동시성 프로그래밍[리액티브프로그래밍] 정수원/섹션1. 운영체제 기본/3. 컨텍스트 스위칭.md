# 자바 동시성 프로그래밍[리액티브 프로그래밍 파트1]

인프런 정수원님의 자바 동시성 프로그래밍 파트1 강의를 듣고 정리한 내용입니다.



## 1. 운영체제 기본  
- 프로세스 & 스레드  
- Parallel & Concurrent(병렬성과 동시성)  
- 컨텍스트스위치  
- CPU 바운드 / IO 바운드  
- 사용자모드 & 커널모드  
- 사용자 수준 스레드 & 커널 수준 스레드  

### 컨텍스트스위치
하나의 CPU는 동일한 시간에 하나의 작업만 수행할 수 있기때문에 여러 프로세스를 동시에 실행할 수 없다.  
하나의 CPU에서 여러프로세스를 동시성으로 처리하기위해서는 한 프로세스에서 다른 프로세스로 전환해야하는데 이를 컨텍스트 스위치라고 한다.  

#### 컨텍스트  
프로세스간 전환을 위해서는 이전에 어디까지 명령을 수행했고 CPU Register에는 어떤 값이 저장되어있는지에 대한 정보가 필요하다.  
Context는 CPU가 해당 프로세스를 실행하기위한 프로세스의 정보를 의미하며 이 정보들은 운영체제가 관리하는 PCB라는 자료구조의 공간에 저장이된다.  

#### PCB
운영체제가 프로세스들을 관리하기위해 프로세스마다 유지하는 정보를 담는 커널 내의 자료구조  
컨텍스트스위칭은 CPU가 프로세스간 PCB정보를 교체하고 캐시를 비우는 일련의 과정이라 볼 수 있다  
각각의 프로세스마다 PCB가 있음  

#### 프로세스 상태
생성, 준비, 실행, 대기, 종료 상태를 가진다.

#### 컨텍스트 스위칭이 일어나는 조건
- 실행중인 프로세스에서 IO호출이 일어나 작업이 끝날때까지 프로세스상태가 실행에서 대기상태로 전이되는 경우  
- 라운드로빈 스케쥴링 등 운영체제의 CPU스케줄러 알고리즘에의해 실행중인 프로세스가 사용하는 시간 자원을 모두 사용했을때 해당 프로세스를 중지하고(준비로 전이) 다른 프로세스를 실행시켜주는 경우  

#### 스레드 컨텍스트 스위칭
- TCB
스레드상태정보를 저장하는 자료구조, CPU정보와 PCB를 가리키는 포인터를 가진다.  
전체적 구조는 PCB와 유사  

- 프로세스 vs 스레드
프로세스는 컨텍스트스위칭할때 메모리주소관련 여러처리(CPU캐시초기화, TLB초기화, MMU주소체계 수정 등)을 하기때문에 오버헤드가 크다.  
스레드는 프로세스 내 메모리를 공유하기때문에 메무로주소관련 추가작업이 없어 프로세스에비해 오버헤드가 작고 컨텍스트스위칭이 빠르다.  
스레드는 생성하는 비용이 커서 많은 수의 스레드 생성은 메모리 부족 현상이 발생하거나 빈번한 컨텍스트스위칭으로 인해 애플리케이션의 성능이 저하될 수 있다.  