# 모던 자바 인 액션

## Part 1. 기초
### chapter 1. 자바 8,9,1-,11 : 무슨 일이 일어나고 있는가?
#### 1.1 역사의 흐름은 무엇인가?
자바는 병렬 실행 환경을 쉽게 관리하고 에러가 덜 발생하는 방향으로 진화하려 노력했다.  
자바 8은 간결한 코드, 멀티코어 프로세서의 쉬운 활용이라는 두가지 요구사항을 기반으로 함

#### 1.2 왜 아직도 자바는 변화하는가?
##### 1.2.2 스트림처리
스트림이란 한번에 한개씩 만들어지는 연속적 데이터 항목의 모임으로  
자바 8에는 java.util.stream 패키지에 스트림 API가 추가되었다.  
스트림 API의 핵심은 기존에는 한번에 한 항목을 처리했지만 이제는 작업을 고수준으로 추상화하여 일련의 스트림으로 만들어 처리할수있다는것

##### 1.2.3 동작 파라미터화로 메서드에 코드 전달하기
자바8에서는 메서드를 다른 메서드의 인수로 넘겨주는 기능을 제공한다.  
이러한 기능을 이론적으로 동작파라미터화라고 부른다.

##### 1.2.4 병렬성과 공유 가변 데이터
스트림 메서드로 전달하는 코드는 다른 코드와 동시에 실행하더라도 안전하게 실행될 수 있어야한다.  
보통 다른 코드와 동시에 실행하더라도 안전하게 실행할 수 있는 코드를 만들려면 공유된 가변데이터에 접근하지 않아야한다.  
이러한 함수를 순수함수, 상태없는함수 라고 부른다.  

##### 1.2.5 자바가 진화해야 하는 이유
자바8에 함수형 프로그래밍을 도입함으로서 전통적 객체지향 프로그래밍과 함수형 프로그래밍의 패러다임 장점을 모두 활용할 수 있게 되었다.  
또한 자바8에 추가된 새로운 기능 덕분에 기존에 다른 언어가 담당하던 생태계 영역을 자바8이 정복하며 더 많은 기회가 열릴것이다.

#### 1.3 자바함수
자바8에서 함수를 새로운 값의 형식으로 추가했다.  
프로그래밍 언어의 핵심은 값을 바꾸는 것이고 이 값을 전통적 프로그래밍 언어에서는 일급값이라고 부른다.  
자바 프로그래밍 언어의 메서드 클래스와 같은 다양한 구조체가 값의 구조를 표현하는데 도움이 될 수 있다.  
하지만 프로그램을 실행하는 동안 이러한 모든 구조체를 자유롭게 전달할 수는 없고, 이렇게 전달할 수 없는 구조체는 이급값이라고한다.  
메서드를 일급시민으로 만들면, 런타임에 메서드를 전달할 수 있다면 프로그래밍에 유용하기때문에  
따라서 자바8 설계자들은 이급시민을 일급시민으로 바꿀수있는 기능을 추가했다.

##### 1.3.1 메서드와 람다를 일급시민으로
메서드참조  
자바 8에서는 메서드가 더이상 이급값이 아닌 일급값이다.  

람다:익명함수  
자바8에서는 람다를 포함하여 함수도 값으로 취급할 수 있다.

#### 1.4 스트림
거의 모든 자바 애플리케이션은 컬렉션을 만들고 활용한다.  
스트림 API를 이용하면 컬렉션 API와는 상당히 다른 방식으로 데이터를 처리할 수 있다.  
스트림 API에서는 루프를 신경 쓸 필요 없이 라이브러리 내부에서 모든 데이터가 처리(내부반복)  
컬렉션을 이용하면 많은 요소를 반복할 경우 오랜 시간이 걸리고 CPU의 멀티코어를 활용해 병렬로 작업하면 좋지만 구현이 어렵다.  
자바8은 스트림 API로 컬렉션을 처리하면서 발생하는 모호함과 반복적 코드 문제, 그리고 멀티코어 활용 어려움을 해결함  
-> 스트림은 스트림 내 요소를 쉽게 병렬로 처리할수 있는 환경을 제공한다는 것이 핵심

#### 1.5 디폴트 메서드와 자바 모듈
지금까지 자바에서는 자바 패키지 집합을 포함하는 JAR파일을 제공하는것이 전부였음  
패키지의 인터페이스를 바꿔야 하는 상황에서 인터페이스를 구현하는 모든 클래스의 구현을 바꿔야 했음(고통)  
-> 자바 9 모듈시스템  
-> 자바 8 디폴트 메서드

#### 1.6 함수형 프로그래밍에서 가져온 다른 유용한 아이디어
자바에 포함된 함수형 프로그래밍의 핵심적 두 아이디어:  
1. 메서드와 람다를 일급값으로 사용   
2. 가변 공유 상태가 없는 병렬실행을 이용하여 효율적이고 안전하게 함수나 메서드를 호출할 수 있다.  

-> 두 아이디어를 활용한 것 : 스트림 API  

일반적 함수형 언어도 프로그램을 돕는 여러 장치를 제공하는데,  
일례로 명시적으로 서술형의 데이터 형식을 이용해 null을 회피하는 기법  
-> 자바 8에서도 Optional을 이용해 NPE를 피할수 있도록 도와줌  

다른 언어에서 패턴 매칭으로 if-then-else보다 더 정확한 비교를 구현할수 있다는 사실 증명  
함수형 언어는 패턴 매칭을 포함한 다양한 데이터 형식을 switch에 사용할 수 있다.  
-> 자바의 패턴매칭

#### 1.7 마치며
- 언어 생태계의 모든 언어는 변화해서 살아남거나 그대로 머물면서 사라지게 된다. 지금은 자바의 위치가 견고하지만 코볼과 같은 언어의 선례를 떠올리면 자바가 영원히 지배적 위치를 유지할 수 있는것은 아닐 수 있다.
- 자바 8은 프로그램을 더 효과적이고 간결하게 구현할 수 있는 새로운 개념과 기능을 제공한다.
- 기존의 자바프로그래밍 기법으로는 멀티코어 프로세서를 온전히 활용하기 어렵다.
- 함수는 일급값으로, 메서드를 어떻게 함수형값으로 넘겨주는지, 익명함수 람다를 어떻게 구현하는지 기억하자.
- 자바 8의 스트림 개념중 일부는 컬렉션에서 가져온 것이다. 스트림과 컬렉션을 적절하게 활용하면 스트림의 인수를 병렬로 처리할 수 있으며 더 가독성이 좋은 코드를 구현할 수 있다.
- 기존 자바 기능으로는 대규모 컴포넌트 기반 프로그래밍 그리고 진화하는 시스템의 인터페이스를 적절하게 대응하기 어려웠다. 자바 9에서는 모듈을 이용해 시스템의 구조를 만들 수 있고 디폴트 메소드를 이용해 기존 인터페이스를 구현하는 클래스를 바꾸지 않고도 인터페이스를 변경할 수 있다.
- 함수형 프로그래밍에서 null 처리 방법과 패턴 매칭 활용 등 흥미로운 기법을 발견했다.